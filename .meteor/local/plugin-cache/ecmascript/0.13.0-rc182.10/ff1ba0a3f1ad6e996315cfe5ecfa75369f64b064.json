{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/michal-pc/Dokumenty/CubeMaster/client/imports/components/training/training.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx",["flow",{}],"nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}]],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/imports/components/training/training.js","filename":"/home/michal-pc/Dokumenty/CubeMaster/client/imports/components/training/training.js","passPerPreset":false,"envName":"development","cwd":"/home/michal-pc/Dokumenty/CubeMaster","root":"/home/michal-pc/Dokumenty/CubeMaster","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.7.1","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/michal-pc/Dokumenty/CubeMaster/client/imports/components/training/training.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/imports/components/training/training.js"}},"code":"let _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 2);\nlet Grid, Menu;\nmodule.link(\"semantic-ui-react\", {\n  Grid(v) {\n    Grid = v;\n  },\n\n  Menu(v) {\n    Menu = v;\n  }\n\n}, 3);\nlet SemanticToastContainer, toast;\nmodule.link(\"react-semantic-toasts\", {\n  SemanticToastContainer(v) {\n    SemanticToastContainer = v;\n  },\n\n  toast(v) {\n    toast = v;\n  }\n\n}, 4);\nlet AlgSettings;\nmodule.link(\"../algSettings\", {\n  default(v) {\n    AlgSettings = v;\n  }\n\n}, 5);\nlet Averages;\nmodule.link(\"../averages\", {\n  default(v) {\n    Averages = v;\n  }\n\n}, 6);\nlet TipsAndTricks;\nmodule.link(\"../tipsAndTricks\", {\n  default(v) {\n    TipsAndTricks = v;\n  }\n\n}, 7);\nlet TrainingMain;\nmodule.link(\"../trainingMain\", {\n  default(v) {\n    TrainingMain = v;\n  }\n\n}, 8);\nlet getRandomScramble;\nmodule.link(\"/lib/global-helpers\", {\n  getRandomScramble(v) {\n    getRandomScramble = v;\n  }\n\n}, 9);\n\n// TODO move it\nconst getRandomEntry = (array, excludeId) => {\n  const index = Math.floor(Math.random() * array.length);\n  const entry = array[index];\n\n  if (array.length > 1 && excludeId && entry._id === excludeId) {\n    return getRandomEntry(array, excludeId);\n  }\n\n  return entry;\n}; // TODO move it\n\n\nconst toastNoActiveAlgorithms = () => toast({\n  title: 'No active algorithms',\n  type: 'warning',\n  description: 'Randomizing algorithms pauzed until you select at least one algorithm',\n  time: 5000\n});\n\nclass Training extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeAlgorithm = () => {\n      const {\n        algorithms\n      } = this.props;\n      const {\n        currentAlgorithmId,\n        currentCategory\n      } = this.state;\n      this.onReset();\n      let newAlgorithm;\n\n      if (currentCategory.randomizableAlgorithm) {\n        const activeAlgorithms = algorithms.filter(algorithm => !!algorithm.active && algorithm.category === currentCategory.value);\n\n        if (!activeAlgorithms.length) {\n          toastNoActiveAlgorithms();\n        }\n\n        newAlgorithm = getRandomEntry(activeAlgorithms, currentAlgorithmId);\n      } else if (currentCategory.randomizableScramble) {\n        const scramble = getRandomScramble(25);\n        newAlgorithm = {\n          category: currentCategory.value,\n          scramble\n        };\n      }\n\n      this.setState({\n        currentAlgorithm: newAlgorithm,\n        currentAlgorithmId: newAlgorithm && newAlgorithm._id // alg may be undefined, e.g. for {OLL,PLL}-Attack\n\n      });\n    };\n\n    this.onChangeCategory = category => {\n      this.setState({\n        currentCategory: category\n      }, () => {\n        this.onChangeAlgorithm();\n      });\n    };\n\n    this.onToggleActive = algorithm => {\n      Meteor.call('algorithms.toggleActive', algorithm._id, !algorithm.active);\n    };\n\n    this.onActivateAll = () => {\n      const {\n        currentCategory\n      } = this.state;\n      Meteor.call('algorithms.activateAll', currentCategory.value);\n    };\n\n    this.onDeactivateAll = () => {\n      Meteor.call('algorithms.deactivateAll');\n      toastNoActiveAlgorithms();\n    };\n\n    this.onKeyDown = event => {\n      if (event.target !== document.body) {\n        return;\n      }\n\n      const blocked = this.state.blocked;\n\n      if ((event.key === 'Enter' || event.key === ' ') && !blocked.space) {\n        event.preventDefault();\n        this.onGoToNextStatus('down');\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            space: true\n          })\n        });\n      } else if (event.key === 'r') {\n        event.preventDefault();\n        this.onChangeAlgorithm();\n      } else if (event.key === 'Shift' && !blocked.shift) {\n        event.preventDefault();\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            shift: true\n          }),\n          isVisibleSolution: true\n        });\n      } else if (event.key === 'Control' && !blocked.control) {\n        event.preventDefault();\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            control: true\n          })\n        });\n      } else if ((event.key === 'Backspace' || event.key === 'Delete' || event.key === 'Escape') && !blocked.delete) {\n        event.preventDefault();\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            delete: true\n          })\n        });\n      }\n    };\n\n    this.onKeyPress = event => {\n      if (event.key === ' ' && event.target === document.body) {\n        event.preventDefault();\n      }\n    };\n\n    this.onKeyUp = event => {\n      if (event.target !== document.body) {\n        return;\n      }\n\n      const {\n        blocked,\n        isVisibleSolution\n      } = this.state;\n\n      if (event.key === 'Enter' || event.key === ' ') {\n        this.onGoToNextStatus('up');\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            space: false\n          })\n        });\n      } else if (event.key === 'Shift') {\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            shift: false\n          }),\n          isVisibleSolution: false\n        });\n      } else if (event.key === 'Control') {\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            control: false\n          }),\n          isVisibleSolution: !isVisibleSolution\n        });\n      } else if (event.key === 'Backspace' || event.key === 'Delete' || event.key === 'Escape') {\n        this.onChangeAlgorithm();\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            delete: false\n          })\n        });\n      }\n    };\n\n    this.onGoToNextStatus = upOrDown => {\n      const {\n        blocked,\n        currentAlgorithm,\n        currentCategory,\n        timerCurrentValue,\n        timerStatus\n      } = this.state;\n\n      if (timerStatus === 'resetted' && upOrDown === 'down' && !blocked.space) {\n        this.setState({\n          timerStatus: 'pre-inspection'\n        });\n      } else if (timerStatus === 'pre-inspection' && upOrDown === 'up') {\n        this.setState({\n          timerStatus: 'timer-on',\n          timerStartValue: moment().valueOf()\n        });\n        this.timer = setInterval(this.updateTimerTime, 1);\n      } else if (timerStatus === 'timer-on' && upOrDown === 'down' && !blocked.space) {\n        clearInterval(this.timer);\n        this.setState({\n          timerStatus: 'timer-off'\n        });\n      } else if (timerStatus === 'timer-off' && upOrDown === 'down' && !blocked.space) {\n        /* Save time */\n        const result = _objectSpread({}, currentAlgorithm && {\n          algorithmId: currentAlgorithm._id,\n          scramble: currentAlgorithm.scramble\n        }, {\n          category: currentCategory.value,\n          time: timerCurrentValue\n        });\n\n        Meteor.call('results.insert', result, () => this.onChangeAlgorithm());\n      }\n    };\n\n    this.onReset = () => {\n      clearInterval(this.timer);\n      this.setState({\n        timerStatus: 'resetted',\n        timerCurrentValue: 0\n      });\n    };\n\n    this.updateTimerTime = () => {\n      this.setState(state => ({\n        timerCurrentValue: moment().valueOf() - state.timerStartValue\n      }));\n    };\n\n    this.state = {\n      blocked: {\n        control: false,\n        delete: false,\n        shift: false,\n        space: false\n      },\n      currentAlgorithm: {\n        category: '',\n        image: '',\n        scramble: '',\n        solution: '',\n        subtype: '',\n        type: ''\n      },\n      currentAlgorithmId: 0,\n      currentCategory: this.props.categories[0],\n      isVisibleSolution: false,\n      settingsOpened: true,\n      timerCurrentValue: 0,\n      timerStartValue: 0,\n      timerStatus: 'resetted'\n    };\n  }\n\n  componentDidMount() {\n    this.onChangeAlgorithm();\n    document.body.addEventListener('keydown', this.onKeyDown);\n    document.body.addEventListener('keypress', this.onKeyPress);\n    document.body.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    document.body.removeEventListener('keydown', this.onKeyDown);\n    document.body.removeEventListener('keypress', this.onKeyPress);\n    document.body.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  render() {\n    const {\n      state: {\n        currentAlgorithm,\n        currentCategory,\n        isVisibleSolution,\n        timerCurrentValue\n      },\n      props: {\n        algorithms,\n        categories\n      },\n      onActivateAll,\n      onToggleActive,\n      onChangeAlgorithm,\n      onChangeCategory,\n      onDeactivateAll\n    } = this;\n    const currentAlgorithms = algorithms.filter(algorithm => algorithm.category === currentCategory.value);\n    return React.createElement(React.Fragment, null, React.createElement(SemanticToastContainer, null), React.createElement(Grid, null, React.createElement(Grid.Column, {\n      width: 4\n    }, React.createElement(Menu, {\n      className: \"left-menu\",\n      inverted: true,\n      tabular: true,\n      vertical: true\n    }, categories.map(category => React.createElement(Menu.Item, {\n      key: category.value,\n      name: category.label,\n      active: currentCategory.value === category.value,\n      onClick: () => onChangeCategory(category)\n    })))), React.createElement(Grid.Column, {\n      width: 8,\n      textAlign: \"center\"\n    }, React.createElement(TrainingMain, {\n      currentAlgorithm: currentAlgorithm,\n      isVisibleSolution: isVisibleSolution,\n      onChangeAlgorithm: onChangeAlgorithm,\n      timerCurrentValue: timerCurrentValue\n    })), React.createElement(Grid.Column, {\n      width: 4\n    }, React.createElement(Averages, {\n      currentAlgorithm: currentAlgorithm,\n      currentCategory: currentCategory\n    }), React.createElement(TipsAndTricks, null))), this.state.settingsOpened && React.createElement(AlgSettings, {\n      algorithms: currentAlgorithms,\n      currentCategory: currentCategory,\n      onActivateAll: onActivateAll,\n      onToggleActive: onToggleActive,\n      onDeactivateAll: onDeactivateAll\n    }));\n  }\n\n}\n\nmodule.exportDefault(Training);","map":{"version":3,"sources":["client/imports/components/training/training.js"],"names":["_objectSpread","module","link","default","v","React","Component","moment","PropTypes","Grid","Menu","SemanticToastContainer","toast","AlgSettings","Averages","TipsAndTricks","TrainingMain","getRandomScramble","getRandomEntry","array","excludeId","index","Math","floor","random","length","entry","_id","toastNoActiveAlgorithms","title","type","description","time","Training","constructor","props","onChangeAlgorithm","algorithms","currentAlgorithmId","currentCategory","state","onReset","newAlgorithm","randomizableAlgorithm","activeAlgorithms","filter","algorithm","active","category","value","randomizableScramble","scramble","setState","currentAlgorithm","onChangeCategory","onToggleActive","Meteor","call","onActivateAll","onDeactivateAll","onKeyDown","event","target","document","body","blocked","key","space","preventDefault","onGoToNextStatus","shift","isVisibleSolution","control","delete","onKeyPress","onKeyUp","upOrDown","timerCurrentValue","timerStatus","timerStartValue","valueOf","timer","setInterval","updateTimerTime","clearInterval","result","algorithmId","image","solution","subtype","categories","settingsOpened","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","currentAlgorithms","map","label","exportDefault"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport {Grid, Menu} from 'semantic-ui-react';\nimport {SemanticToastContainer, toast} from 'react-semantic-toasts';\n\nimport AlgSettings from '../algSettings';\nimport Averages from '../averages';\nimport TipsAndTricks from '../tipsAndTricks';\nimport TrainingMain from '../trainingMain';\n\nimport {getRandomScramble} from '/lib/global-helpers';\n\n// TODO move it\nconst getRandomEntry = (array, excludeId) => {\n  const index = Math.floor(Math.random() * array.length);\n  const entry = array[index];\n\n  if (array.length > 1 && excludeId && entry._id === excludeId) {\n    return getRandomEntry(array, excludeId);\n  }\n\n  return entry;\n};\n\n// TODO move it\nconst toastNoActiveAlgorithms = () =>\n  toast({\n    title: 'No active algorithms',\n    type: 'warning',\n    description:\n      'Randomizing algorithms pauzed until you select at least one algorithm',\n    time: 5000\n  });\n\nclass Training extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      blocked: {\n        control: false,\n        delete: false,\n        shift: false,\n        space: false\n      },\n      currentAlgorithm: {\n        category: '',\n        image: '',\n        scramble: '',\n        solution: '',\n        subtype: '',\n        type: ''\n      },\n      currentAlgorithmId: 0,\n      currentCategory: this.props.categories[0],\n      isVisibleSolution: false,\n      settingsOpened: true,\n      timerCurrentValue: 0,\n      timerStartValue: 0,\n      timerStatus: 'resetted'\n    };\n  }\n\n  componentDidMount() {\n    this.onChangeAlgorithm();\n\n    document.body.addEventListener('keydown', this.onKeyDown);\n    document.body.addEventListener('keypress', this.onKeyPress);\n    document.body.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    document.body.removeEventListener('keydown', this.onKeyDown);\n    document.body.removeEventListener('keypress', this.onKeyPress);\n    document.body.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  onChangeAlgorithm = () => {\n    const {algorithms} = this.props;\n    const {currentAlgorithmId, currentCategory} = this.state;\n\n    this.onReset();\n\n    let newAlgorithm;\n    if (currentCategory.randomizableAlgorithm) {\n      const activeAlgorithms = algorithms.filter(\n        algorithm =>\n          !!algorithm.active && algorithm.category === currentCategory.value\n      );\n\n      if (!activeAlgorithms.length) {\n        toastNoActiveAlgorithms();\n      }\n\n      newAlgorithm = getRandomEntry(activeAlgorithms, currentAlgorithmId);\n    } else if (currentCategory.randomizableScramble) {\n      const scramble = getRandomScramble(25);\n      newAlgorithm = {category: currentCategory.value, scramble};\n    }\n\n    this.setState({\n      currentAlgorithm: newAlgorithm,\n      currentAlgorithmId: newAlgorithm && newAlgorithm._id // alg may be undefined, e.g. for {OLL,PLL}-Attack\n    });\n  };\n\n  onChangeCategory = category => {\n    this.setState({currentCategory: category}, () => {\n      this.onChangeAlgorithm();\n    });\n  };\n\n  onToggleActive = algorithm => {\n    Meteor.call('algorithms.toggleActive', algorithm._id, !algorithm.active);\n  };\n\n  onActivateAll = () => {\n    const {currentCategory} = this.state;\n    Meteor.call('algorithms.activateAll', currentCategory.value);\n  };\n\n  onDeactivateAll = () => {\n    Meteor.call('algorithms.deactivateAll');\n    toastNoActiveAlgorithms();\n  };\n\n  onKeyDown = event => {\n    if (event.target !== document.body) {\n      return;\n    }\n\n    const blocked = this.state.blocked;\n\n    if ((event.key === 'Enter' || event.key === ' ') && !blocked.space) {\n      event.preventDefault();\n      this.onGoToNextStatus('down');\n      this.setState({blocked: {...blocked, space: true}});\n    } else if (event.key === 'r') {\n      event.preventDefault();\n      this.onChangeAlgorithm();\n    } else if (event.key === 'Shift' && !blocked.shift) {\n      event.preventDefault();\n      this.setState({\n        blocked: {...blocked, shift: true},\n        isVisibleSolution: true\n      });\n    } else if (event.key === 'Control' && !blocked.control) {\n      event.preventDefault();\n      this.setState({blocked: {...blocked, control: true}});\n    } else if (\n      (event.key === 'Backspace' ||\n        event.key === 'Delete' ||\n        event.key === 'Escape') &&\n      !blocked.delete\n    ) {\n      event.preventDefault();\n      this.setState({blocked: {...blocked, delete: true}});\n    }\n  };\n\n  onKeyPress = event => {\n    if (event.key === ' ' && event.target === document.body) {\n      event.preventDefault();\n    }\n  };\n\n  onKeyUp = event => {\n    if (event.target !== document.body) {\n      return;\n    }\n\n    const {blocked, isVisibleSolution} = this.state;\n\n    if (event.key === 'Enter' || event.key === ' ') {\n      this.onGoToNextStatus('up');\n      this.setState({blocked: {...blocked, space: false}});\n    } else if (event.key === 'Shift') {\n      this.setState({\n        blocked: {...blocked, shift: false},\n        isVisibleSolution: false\n      });\n    } else if (event.key === 'Control') {\n      this.setState({\n        blocked: {...blocked, control: false},\n        isVisibleSolution: !isVisibleSolution\n      });\n    } else if (\n      event.key === 'Backspace' ||\n      event.key === 'Delete' ||\n      event.key === 'Escape'\n    ) {\n      this.onChangeAlgorithm();\n      this.setState({blocked: {...blocked, delete: false}});\n    }\n  };\n\n  onGoToNextStatus = upOrDown => {\n    const {\n      blocked,\n      currentAlgorithm,\n      currentCategory,\n      timerCurrentValue,\n      timerStatus\n    } = this.state;\n\n    if (timerStatus === 'resetted' && upOrDown === 'down' && !blocked.space) {\n      this.setState({timerStatus: 'pre-inspection'});\n    } else if (timerStatus === 'pre-inspection' && upOrDown === 'up') {\n      this.setState({\n        timerStatus: 'timer-on',\n        timerStartValue: moment().valueOf()\n      });\n      this.timer = setInterval(this.updateTimerTime, 1);\n    } else if (\n      timerStatus === 'timer-on' &&\n      upOrDown === 'down' &&\n      !blocked.space\n    ) {\n      clearInterval(this.timer);\n      this.setState({timerStatus: 'timer-off'});\n    } else if (\n      timerStatus === 'timer-off' &&\n      upOrDown === 'down' &&\n      !blocked.space\n    ) {\n      /* Save time */\n      const result = {\n        ...(currentAlgorithm && {\n          algorithmId: currentAlgorithm._id,\n          scramble: currentAlgorithm.scramble\n        }),\n        category: currentCategory.value,\n        time: timerCurrentValue\n      };\n\n      Meteor.call('results.insert', result, () => this.onChangeAlgorithm());\n    }\n  };\n\n  onReset = () => {\n    clearInterval(this.timer);\n    this.setState({timerStatus: 'resetted', timerCurrentValue: 0});\n  };\n\n  updateTimerTime = () => {\n    this.setState(state => ({\n      timerCurrentValue: moment().valueOf() - state.timerStartValue\n    }));\n  };\n\n  render() {\n    const {\n      state: {\n        currentAlgorithm,\n        currentCategory,\n        isVisibleSolution,\n        timerCurrentValue\n      },\n      props: {algorithms, categories},\n      onActivateAll,\n      onToggleActive,\n      onChangeAlgorithm,\n      onChangeCategory,\n      onDeactivateAll\n    } = this;\n\n    const currentAlgorithms = algorithms.filter(\n      algorithm => algorithm.category === currentCategory.value\n    );\n\n    return (\n      <>\n        <SemanticToastContainer />\n        <Grid>\n          <Grid.Column width={4}>\n            <Menu className=\"left-menu\" inverted tabular vertical>\n              {categories.map(category => (\n                <Menu.Item\n                  key={category.value}\n                  name={category.label}\n                  active={currentCategory.value === category.value}\n                  onClick={() => onChangeCategory(category)}\n                />\n              ))}\n            </Menu>\n          </Grid.Column>\n          <Grid.Column width={8} textAlign=\"center\">\n            <TrainingMain\n              currentAlgorithm={currentAlgorithm}\n              isVisibleSolution={isVisibleSolution}\n              onChangeAlgorithm={onChangeAlgorithm}\n              timerCurrentValue={timerCurrentValue}\n            />\n          </Grid.Column>\n          <Grid.Column width={4}>\n            <Averages\n              currentAlgorithm={currentAlgorithm}\n              currentCategory={currentCategory}\n            />\n            <TipsAndTricks />\n          </Grid.Column>\n        </Grid>\n        {this.state.settingsOpened && (\n          <AlgSettings\n            algorithms={currentAlgorithms}\n            currentCategory={currentCategory}\n            onActivateAll={onActivateAll}\n            onToggleActive={onToggleActive}\n            onDeactivateAll={onDeactivateAll}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default Training;\n"]},"sourceType":"module","hash":"ff1ba0a3f1ad6e996315cfe5ecfa75369f64b064"}
