{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/michal-pc/Dokumenty/CubeMaster/client/imports/components/training/training.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx",["flow",{}],"nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}]],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/imports/components/training/training.js","filename":"/home/michal-pc/Dokumenty/CubeMaster/client/imports/components/training/training.js","passPerPreset":false,"envName":"development","cwd":"/home/michal-pc/Dokumenty/CubeMaster","root":"/home/michal-pc/Dokumenty/CubeMaster","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.7.1","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"TSModuleBlock":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/michal-pc/Dokumenty/CubeMaster/client/imports/components/training/training.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/imports/components/training/training.js"}},"code":"var _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\n\nvar _inheritsLoose;\n\nmodule.link(\"@babel/runtime/helpers/inheritsLoose\", {\n  default: function (v) {\n    _inheritsLoose = v;\n  }\n}, 1);\nvar React, Component;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 1);\nvar Grid, Menu;\nmodule.link(\"semantic-ui-react\", {\n  Grid: function (v) {\n    Grid = v;\n  },\n  Menu: function (v) {\n    Menu = v;\n  }\n}, 2);\nvar SemanticToastContainer, toast;\nmodule.link(\"react-semantic-toasts\", {\n  SemanticToastContainer: function (v) {\n    SemanticToastContainer = v;\n  },\n  toast: function (v) {\n    toast = v;\n  }\n}, 3);\nvar AlgSettings;\nmodule.link(\"../algSettings\", {\n  \"default\": function (v) {\n    AlgSettings = v;\n  }\n}, 4);\nvar Averages;\nmodule.link(\"../averages\", {\n  \"default\": function (v) {\n    Averages = v;\n  }\n}, 5);\nvar TipsAndTricks;\nmodule.link(\"../tipsAndTricks\", {\n  \"default\": function (v) {\n    TipsAndTricks = v;\n  }\n}, 6);\nvar TrainingMain;\nmodule.link(\"../trainingMain\", {\n  \"default\": function (v) {\n    TrainingMain = v;\n  }\n}, 7);\nvar getRandomScramble;\nmodule.link(\"/lib/global-helpers\", {\n  getRandomScramble: function (v) {\n    getRandomScramble = v;\n  }\n}, 8);\n\n// TODO to be moved\nvar getRandomEntry = function (array, excludeId) {\n  var index = Math.floor(Math.random() * array.length);\n  var entry = array[index];\n\n  if (array.length > 1 && excludeId && entry._id === excludeId) {\n    return getRandomEntry(array, excludeId);\n  }\n\n  return entry;\n}; // TODO to be moved\n\n\nvar toastNoActiveAlgorithms = function () {\n  return toast({\n    title: 'No active algorithms',\n    type: 'warning',\n    description: 'Randomizing algorithms pauzed until you select at least one algorithm',\n    time: 5000\n  });\n};\n\nvar Training =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Training, _Component);\n\n  function Training(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.onChangeAlgorithm = function () {\n      var algorithms = _this.props.algorithms;\n      var _this$state = _this.state,\n          currentAlgorithmId = _this$state.currentAlgorithmId,\n          currentCategory = _this$state.currentCategory;\n\n      _this.onReset();\n\n      var newAlgorithm;\n\n      if (currentCategory.randomizableAlgorithm) {\n        var activeAlgorithms = algorithms.filter(function (algorithm) {\n          return !!algorithm.active && algorithm.category === currentCategory.value;\n        });\n\n        if (!activeAlgorithms.length) {\n          toastNoActiveAlgorithms();\n        }\n\n        newAlgorithm = getRandomEntry(activeAlgorithms, currentAlgorithmId);\n      } else if (currentCategory.randomizableScramble) {\n        var scramble = getRandomScramble(25);\n        newAlgorithm = {\n          category: currentCategory.value,\n          scramble: scramble\n        };\n      }\n\n      _this.setState({\n        currentAlgorithm: newAlgorithm,\n        currentAlgorithmId: newAlgorithm && newAlgorithm._id // alg may be undefined, e.g. for {OLL,PLL}-Attack\n\n      });\n    };\n\n    _this.onChangeCategory = function (category) {\n      _this.setState({\n        currentCategory: category\n      }, function () {\n        _this.onChangeAlgorithm();\n      });\n    };\n\n    _this.onToggleActive = function (algorithm) {\n      Meteor.call('algorithms.toggleActive', algorithm._id, !algorithm.active);\n    };\n\n    _this.onActivateAll = function () {\n      var currentCategory = _this.state.currentCategory;\n      Meteor.call('algorithms.activateAll', currentCategory.value);\n    };\n\n    _this.onDeactivateAll = function () {\n      Meteor.call('algorithms.deactivateAll');\n      toastNoActiveAlgorithms();\n    };\n\n    _this.onKeyDown = function (event) {\n      if (event.target !== document.body) {\n        return;\n      }\n\n      console.log('event', event);\n      var blocked = _this.state.blocked;\n\n      if ((event.key === 'Enter' || event.key === ' ') && !blocked.space) {\n        event.preventDefault();\n\n        _this.onGoToNextStatus('down');\n\n        _this.setState({\n          blocked: _objectSpread({}, blocked, {\n            space: true\n          })\n        });\n      } else if (event.key === 'r') {\n        event.preventDefault();\n\n        _this.onChangeAlgorithm();\n      } else if (event.key === 'Shift' && !blocked.shift) {\n        event.preventDefault();\n\n        _this.setState({\n          blocked: _objectSpread({}, blocked, {\n            shift: true\n          }),\n          isVisibleSolution: true\n        });\n      } else if (event.key === 'Control' && !blocked.control) {\n        event.preventDefault();\n\n        _this.setState({\n          blocked: _objectSpread({}, blocked, {\n            control: true\n          })\n        });\n      } else if ((event.key === 'Backspace' || event.key === 'Delete' || event.key === 'Escape') && !blocked.delete) {\n        event.preventDefault();\n\n        _this.setState({\n          blocked: _objectSpread({}, blocked, {\n            \"delete\": true\n          })\n        });\n      }\n    };\n\n    _this.onKeyPress = function (event) {\n      if (event.key === ' ' && event.target === document.body) {\n        event.preventDefault();\n      }\n    };\n\n    _this.onKeyUp = function (event) {\n      if (event.target !== document.body) {\n        return;\n      }\n\n      var _this$state2 = _this.state,\n          blocked = _this$state2.blocked,\n          isVisibleSolution = _this$state2.isVisibleSolution;\n\n      if (event.key === 'Enter' || event.key === ' ') {\n        _this.onGoToNextStatus('up');\n\n        _this.setState({\n          blocked: _objectSpread({}, blocked, {\n            space: false\n          })\n        });\n      } else if (event.key === 'Shift') {\n        _this.setState({\n          blocked: _objectSpread({}, blocked, {\n            shift: false\n          }),\n          isVisibleSolution: false\n        });\n      } else if (event.key === 'Control') {\n        _this.setState({\n          blocked: _objectSpread({}, blocked, {\n            control: false\n          }),\n          isVisibleSolution: !isVisibleSolution\n        });\n      } else if (event.key === 'Backspace' || event.key === 'Delete' || event.key === 'Escape') {\n        _this.onChangeAlgorithm();\n\n        _this.setState({\n          blocked: _objectSpread({}, blocked, {\n            \"delete\": false\n          })\n        });\n      }\n    };\n\n    _this.onGoToNextStatus = function (upOrDown) {\n      var _this$state3 = _this.state,\n          blocked = _this$state3.blocked,\n          currentAlgorithm = _this$state3.currentAlgorithm,\n          currentCategory = _this$state3.currentCategory,\n          timerCurrentValue = _this$state3.timerCurrentValue,\n          timerStatus = _this$state3.timerStatus;\n\n      if (timerStatus === 'resetted' && upOrDown === 'down' && !blocked.space) {\n        _this.setState({\n          timerStatus: 'pre-inspection'\n        });\n      } else if (timerStatus === 'pre-inspection' && upOrDown === 'up') {\n        _this.setState({\n          timerStatus: 'timer-on',\n          timerStartValue: moment().valueOf()\n        });\n\n        _this.timer = setInterval(_this.updateTimerTime, 1);\n      } else if (timerStatus === 'timer-on' && upOrDown === 'down' && !blocked.space) {\n        clearInterval(_this.timer);\n\n        _this.setState({\n          timerStatus: 'timer-off'\n        });\n      } else if (timerStatus === 'timer-off' && upOrDown === 'down' && !blocked.space) {\n        /* Save the time */\n        var result = _objectSpread({}, currentAlgorithm && {\n          algorithmId: currentAlgorithm._id,\n          scramble: currentAlgorithm.scramble\n        }, {\n          category: currentCategory.value,\n          time: timerCurrentValue\n        });\n\n        Meteor.call('results.insert', result, function () {\n          return _this.onChangeAlgorithm();\n        });\n      }\n    };\n\n    _this.onReset = function () {\n      clearInterval(_this.timer);\n\n      _this.setState({\n        timerStatus: 'resetted',\n        timerCurrentValue: 0\n      });\n    };\n\n    _this.updateTimerTime = function () {\n      _this.setState(function (state) {\n        return {\n          timerCurrentValue: moment().valueOf() - state.timerStartValue\n        };\n      });\n    };\n\n    _this.state = {\n      blocked: {\n        control: false,\n        \"delete\": false,\n        shift: false,\n        space: false\n      },\n      currentAlgorithm: {\n        category: '',\n        image: '',\n        scramble: '',\n        solution: '',\n        subtype: '',\n        type: ''\n      },\n      currentAlgorithmId: 0,\n      currentCategory: _this.props.categories[0],\n      isVisibleSolution: false,\n      settingsOpened: true,\n      timerCurrentValue: 0,\n      timerStartValue: 0,\n      timerStatus: 'resetted'\n    };\n    return _this;\n  }\n\n  var _proto = Training.prototype;\n\n  _proto.componentDidMount = function () {\n    function componentDidMount() {\n      this.onChangeAlgorithm();\n      document.body.addEventListener('keydown', this.onKeyDown);\n      document.body.addEventListener('keypress', this.onKeyPress);\n      document.body.addEventListener('keyup', this.onKeyUp);\n    }\n\n    return componentDidMount;\n  }();\n\n  _proto.componentWillUnmount = function () {\n    function componentWillUnmount() {\n      document.body.removeEventListener('keydown', this.onKeyDown);\n      document.body.removeEventListener('keypress', this.onKeyPress);\n      document.body.removeEventListener('keyup', this.onKeyUp);\n    }\n\n    return componentWillUnmount;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      var _this$state4 = this.state,\n          currentAlgorithm = _this$state4.currentAlgorithm,\n          currentCategory = _this$state4.currentCategory,\n          isVisibleSolution = _this$state4.isVisibleSolution,\n          timerCurrentValue = _this$state4.timerCurrentValue,\n          _this$props = this.props,\n          algorithms = _this$props.algorithms,\n          categories = _this$props.categories,\n          onActivateAll = this.onActivateAll,\n          onToggleActive = this.onToggleActive,\n          onChangeAlgorithm = this.onChangeAlgorithm,\n          onChangeCategory = this.onChangeCategory,\n          onDeactivateAll = this.onDeactivateAll;\n      var currentAlgorithms = algorithms.filter(function (algorithm) {\n        return algorithm.category === currentCategory.value;\n      });\n      return React.createElement(React.Fragment, null, React.createElement(SemanticToastContainer, null), React.createElement(Grid, null, React.createElement(Grid.Column, {\n        width: 4\n      }, React.createElement(Menu, {\n        className: \"left-menu\",\n        inverted: true,\n        tabular: true,\n        vertical: true\n      }, categories.map(function (category) {\n        return React.createElement(Menu.Item, {\n          key: category.value,\n          name: category.label,\n          active: currentCategory.value === category.value,\n          onClick: function () {\n            return onChangeCategory(category);\n          }\n        });\n      }))), React.createElement(Grid.Column, {\n        width: 8,\n        textAlign: \"center\"\n      }, React.createElement(TrainingMain, {\n        currentAlgorithm: currentAlgorithm,\n        isVisibleSolution: isVisibleSolution,\n        onChangeAlgorithm: onChangeAlgorithm,\n        timerCurrentValue: timerCurrentValue\n      })), React.createElement(Grid.Column, {\n        width: 4\n      }, React.createElement(Averages, {\n        currentAlgorithm: currentAlgorithm,\n        currentCategory: currentCategory\n      }), React.createElement(TipsAndTricks, null))), this.state.settingsOpened && React.createElement(AlgSettings, {\n        algorithms: currentAlgorithms,\n        currentCategory: currentCategory,\n        onActivateAll: onActivateAll,\n        onToggleActive: onToggleActive,\n        onDeactivateAll: onDeactivateAll\n      }));\n    }\n\n    return render;\n  }();\n\n  return Training;\n}(Component);\n\nmodule.exportDefault(Training);","map":{"version":3,"sources":["client/imports/components/training/training.js"],"names":["_objectSpread","module","link","default","v","_inheritsLoose","React","Component","moment","Grid","Menu","SemanticToastContainer","toast","AlgSettings","Averages","TipsAndTricks","TrainingMain","getRandomScramble","getRandomEntry","array","excludeId","index","Math","floor","random","length","entry","_id","toastNoActiveAlgorithms","title","type","description","time","Training","props","onChangeAlgorithm","algorithms","state","currentAlgorithmId","currentCategory","onReset","newAlgorithm","randomizableAlgorithm","activeAlgorithms","filter","algorithm","active","category","value","randomizableScramble","scramble","setState","currentAlgorithm","onChangeCategory","onToggleActive","Meteor","call","onActivateAll","onDeactivateAll","onKeyDown","event","target","document","body","console","log","blocked","key","space","preventDefault","onGoToNextStatus","shift","isVisibleSolution","control","delete","onKeyPress","onKeyUp","upOrDown","timerCurrentValue","timerStatus","timerStartValue","valueOf","timer","setInterval","updateTimerTime","clearInterval","result","algorithmId","image","solution","subtype","categories","settingsOpened","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","currentAlgorithms","map","label","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from 'moment';\nimport { Grid, Menu } from 'semantic-ui-react';\nimport { SemanticToastContainer, toast } from 'react-semantic-toasts';\n\nimport AlgSettings from '../algSettings';\nimport Averages from '../averages';\nimport TipsAndTricks from '../tipsAndTricks';\nimport TrainingMain from '../trainingMain';\n\nimport { getRandomScramble } from '/lib/global-helpers';\n\n// TODO to be moved\nconst getRandomEntry = (array, excludeId) => {\n  const index = Math.floor(Math.random() * array.length);\n  const entry = array[index];\n\n  if (array.length > 1 && excludeId && entry._id === excludeId) {\n    return getRandomEntry(array, excludeId);\n  }\n\n  return entry;\n};\n\n// TODO to be moved\nconst toastNoActiveAlgorithms = () =>\n  toast({\n    title: 'No active algorithms',\n    type: 'warning',\n    description:\n      'Randomizing algorithms pauzed until you select at least one algorithm',\n    time: 5000\n  });\n\nclass Training extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      blocked: {\n        control: false,\n        delete: false,\n        shift: false,\n        space: false\n      },\n      currentAlgorithm: {\n        category: '',\n        image: '',\n        scramble: '',\n        solution: '',\n        subtype: '',\n        type: ''\n      },\n      currentAlgorithmId: 0,\n      currentCategory: this.props.categories[0],\n      isVisibleSolution: false,\n      settingsOpened: true,\n      timerCurrentValue: 0,\n      timerStartValue: 0,\n      timerStatus: 'resetted'\n    };\n  }\n\n  componentDidMount() {\n    this.onChangeAlgorithm();\n\n    document.body.addEventListener('keydown', this.onKeyDown);\n    document.body.addEventListener('keypress', this.onKeyPress);\n    document.body.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    document.body.removeEventListener('keydown', this.onKeyDown);\n    document.body.removeEventListener('keypress', this.onKeyPress);\n    document.body.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  onChangeAlgorithm = () => {\n    const { algorithms } = this.props;\n    const { currentAlgorithmId, currentCategory } = this.state;\n\n    this.onReset();\n\n    let newAlgorithm;\n    if (currentCategory.randomizableAlgorithm) {\n      const activeAlgorithms = algorithms.filter(\n        algorithm =>\n          !!algorithm.active && algorithm.category === currentCategory.value\n      );\n\n      if (!activeAlgorithms.length) {\n        toastNoActiveAlgorithms();\n      }\n\n      newAlgorithm = getRandomEntry(activeAlgorithms, currentAlgorithmId);\n    } else if (currentCategory.randomizableScramble) {\n      const scramble = getRandomScramble(25);\n      newAlgorithm = { category: currentCategory.value, scramble };\n    }\n\n    this.setState({\n      currentAlgorithm: newAlgorithm,\n      currentAlgorithmId: newAlgorithm && newAlgorithm._id // alg may be undefined, e.g. for {OLL,PLL}-Attack\n    });\n  };\n\n  onChangeCategory = category => {\n    this.setState({ currentCategory: category }, () => {\n      this.onChangeAlgorithm();\n    });\n  };\n\n  onToggleActive = algorithm => {\n    Meteor.call('algorithms.toggleActive', algorithm._id, !algorithm.active);\n  };\n\n  onActivateAll = () => {\n    const { currentCategory } = this.state;\n    Meteor.call('algorithms.activateAll', currentCategory.value);\n  };\n\n  onDeactivateAll = () => {\n    Meteor.call('algorithms.deactivateAll');\n    toastNoActiveAlgorithms();\n  };\n\n  onKeyDown = event => {\n    if (event.target !== document.body) {\n      return;\n    }\n    console.log('event', event);\n\n    const blocked = this.state.blocked;\n\n    if ((event.key === 'Enter' || event.key === ' ') && !blocked.space) {\n      event.preventDefault();\n      this.onGoToNextStatus('down');\n      this.setState({ blocked: { ...blocked, space: true } });\n    } else if (event.key === 'r') {\n      event.preventDefault();\n      this.onChangeAlgorithm();\n    } else if (event.key === 'Shift' && !blocked.shift) {\n      event.preventDefault();\n      this.setState({\n        blocked: { ...blocked, shift: true },\n        isVisibleSolution: true\n      });\n    } else if (event.key === 'Control' && !blocked.control) {\n      event.preventDefault();\n      this.setState({ blocked: { ...blocked, control: true } });\n    } else if (\n      (event.key === 'Backspace' ||\n        event.key === 'Delete' ||\n        event.key === 'Escape') &&\n      !blocked.delete\n    ) {\n      event.preventDefault();\n      this.setState({ blocked: { ...blocked, delete: true } });\n    }\n  };\n\n  onKeyPress = event => {\n    if (event.key === ' ' && event.target === document.body) {\n      event.preventDefault();\n    }\n  };\n\n  onKeyUp = event => {\n    if (event.target !== document.body) {\n      return;\n    }\n\n    const { blocked, isVisibleSolution } = this.state;\n\n    if (event.key === 'Enter' || event.key === ' ') {\n      this.onGoToNextStatus('up');\n      this.setState({ blocked: { ...blocked, space: false } });\n    } else if (event.key === 'Shift') {\n      this.setState({\n        blocked: { ...blocked, shift: false },\n        isVisibleSolution: false\n      });\n    } else if (event.key === 'Control') {\n      this.setState({\n        blocked: { ...blocked, control: false },\n        isVisibleSolution: !isVisibleSolution\n      });\n    } else if (\n      event.key === 'Backspace' ||\n      event.key === 'Delete' ||\n      event.key === 'Escape'\n    ) {\n      this.onChangeAlgorithm();\n      this.setState({ blocked: { ...blocked, delete: false } });\n    }\n  };\n\n  onGoToNextStatus = upOrDown => {\n    const {\n      blocked,\n      currentAlgorithm,\n      currentCategory,\n      timerCurrentValue,\n      timerStatus\n    } = this.state;\n\n    if (timerStatus === 'resetted' && upOrDown === 'down' && !blocked.space) {\n      this.setState({ timerStatus: 'pre-inspection' });\n    } else if (timerStatus === 'pre-inspection' && upOrDown === 'up') {\n      this.setState({\n        timerStatus: 'timer-on',\n        timerStartValue: moment().valueOf()\n      });\n      this.timer = setInterval(this.updateTimerTime, 1);\n    } else if (\n      timerStatus === 'timer-on' &&\n      upOrDown === 'down' &&\n      !blocked.space\n    ) {\n      clearInterval(this.timer);\n      this.setState({ timerStatus: 'timer-off' });\n    } else if (\n      timerStatus === 'timer-off' &&\n      upOrDown === 'down' &&\n      !blocked.space\n    ) {\n      /* Save the time */\n      const result = {\n        ...(currentAlgorithm && {\n          algorithmId: currentAlgorithm._id,\n          scramble: currentAlgorithm.scramble\n        }),\n        category: currentCategory.value,\n        time: timerCurrentValue\n      };\n\n      Meteor.call('results.insert', result, () => this.onChangeAlgorithm());\n    }\n  };\n\n  onReset = () => {\n    clearInterval(this.timer);\n    this.setState({ timerStatus: 'resetted', timerCurrentValue: 0 });\n  };\n\n  updateTimerTime = () => {\n    this.setState(state => ({\n      timerCurrentValue: moment().valueOf() - state.timerStartValue\n    }));\n  };\n\n  render() {\n    const {\n      state: {\n        currentAlgorithm,\n        currentCategory,\n        isVisibleSolution,\n        timerCurrentValue\n      },\n      props: { algorithms, categories },\n      onActivateAll,\n      onToggleActive,\n      onChangeAlgorithm,\n      onChangeCategory,\n      onDeactivateAll\n    } = this;\n\n    const currentAlgorithms = algorithms.filter(\n      algorithm => algorithm.category === currentCategory.value\n    );\n\n    return (\n      <>\n        <SemanticToastContainer />\n        <Grid>\n          <Grid.Column width={4}>\n            <Menu className=\"left-menu\" inverted tabular vertical>\n              {categories.map(category => (\n                <Menu.Item\n                  key={category.value}\n                  name={category.label}\n                  active={currentCategory.value === category.value}\n                  onClick={() => onChangeCategory(category)}\n                />\n              ))}\n            </Menu>\n          </Grid.Column>\n          <Grid.Column width={8} textAlign=\"center\">\n            <TrainingMain\n              currentAlgorithm={currentAlgorithm}\n              isVisibleSolution={isVisibleSolution}\n              onChangeAlgorithm={onChangeAlgorithm}\n              timerCurrentValue={timerCurrentValue}\n            />\n          </Grid.Column>\n          <Grid.Column width={4}>\n            <Averages\n              currentAlgorithm={currentAlgorithm}\n              currentCategory={currentCategory}\n            />\n            <TipsAndTricks />\n          </Grid.Column>\n        </Grid>\n        {this.state.settingsOpened && (\n          <AlgSettings\n            algorithms={currentAlgorithms}\n            currentCategory={currentCategory}\n            onActivateAll={onActivateAll}\n            onToggleActive={onToggleActive}\n            onDeactivateAll={onDeactivateAll}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default Training;\n"]},"sourceType":"module","hash":"891f267652544fe5bff43f8e421fca1c0b084ff1"}
