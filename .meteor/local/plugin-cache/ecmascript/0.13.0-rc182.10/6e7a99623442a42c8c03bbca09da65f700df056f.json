{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/michal-pc/Dokumenty/CubeMaster/client/imports/components/training/training.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx",["flow",{}],"nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}]],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/imports/components/training/training.js","filename":"/home/michal-pc/Dokumenty/CubeMaster/client/imports/components/training/training.js","passPerPreset":false,"envName":"development","cwd":"/home/michal-pc/Dokumenty/CubeMaster","root":"/home/michal-pc/Dokumenty/CubeMaster","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.7.1","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/michal-pc/Dokumenty/CubeMaster/client/imports/components/training/training.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/imports/components/training/training.js"}},"code":"let _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 1);\nlet Grid, Menu;\nmodule.link(\"semantic-ui-react\", {\n  Grid(v) {\n    Grid = v;\n  },\n\n  Menu(v) {\n    Menu = v;\n  }\n\n}, 2);\nlet SemanticToastContainer, toast;\nmodule.link(\"react-semantic-toasts\", {\n  SemanticToastContainer(v) {\n    SemanticToastContainer = v;\n  },\n\n  toast(v) {\n    toast = v;\n  }\n\n}, 3);\nlet AlgSettings;\nmodule.link(\"../algSettings\", {\n  default(v) {\n    AlgSettings = v;\n  }\n\n}, 4);\nlet Averages;\nmodule.link(\"../averages\", {\n  default(v) {\n    Averages = v;\n  }\n\n}, 5);\nlet TipsAndTricks;\nmodule.link(\"../tipsAndTricks\", {\n  default(v) {\n    TipsAndTricks = v;\n  }\n\n}, 6);\nlet TrainingMain;\nmodule.link(\"../trainingMain\", {\n  default(v) {\n    TrainingMain = v;\n  }\n\n}, 7);\nlet getRandomScramble;\nmodule.link(\"/lib/global-helpers\", {\n  getRandomScramble(v) {\n    getRandomScramble = v;\n  }\n\n}, 8);\n\n// TODO to be moved\nconst getRandomEntry = (array, excludeId) => {\n  const index = Math.floor(Math.random() * array.length);\n  const entry = array[index];\n\n  if (array.length > 1 && excludeId && entry._id === excludeId) {\n    return getRandomEntry(array, excludeId);\n  }\n\n  return entry;\n}; // TODO to be moved\n\n\nconst toastNoActiveAlgorithms = () => toast({\n  title: 'No active algorithms',\n  type: 'warning',\n  description: 'Randomizing algorithms pauzed until you select at least one algorithm',\n  time: 5000\n});\n\nclass Training extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeAlgorithm = () => {\n      const {\n        algorithms\n      } = this.props;\n      const {\n        currentAlgorithmId,\n        currentCategory\n      } = this.state;\n      this.onReset();\n      let newAlgorithm;\n\n      if (currentCategory.randomizableAlgorithm) {\n        const activeAlgorithms = algorithms.filter(algorithm => !!algorithm.active && algorithm.category === currentCategory.value);\n\n        if (!activeAlgorithms.length) {\n          toastNoActiveAlgorithms();\n        }\n\n        newAlgorithm = getRandomEntry(activeAlgorithms, currentAlgorithmId);\n      } else if (currentCategory.randomizableScramble) {\n        const scramble = getRandomScramble(25);\n        newAlgorithm = {\n          category: currentCategory.value,\n          scramble\n        };\n      }\n\n      this.setState({\n        currentAlgorithm: newAlgorithm,\n        currentAlgorithmId: newAlgorithm && newAlgorithm._id // alg may be undefined, e.g. for {OLL,PLL}-Attack\n\n      });\n    };\n\n    this.onChangeCategory = category => {\n      this.setState({\n        currentCategory: category\n      }, () => {\n        this.onChangeAlgorithm();\n      });\n    };\n\n    this.onToggleActive = algorithm => {\n      Meteor.call('algorithms.toggleActive', algorithm._id, !algorithm.active);\n    };\n\n    this.onActivateAll = () => {\n      const {\n        currentCategory\n      } = this.state;\n      Meteor.call('algorithms.activateAll', currentCategory.value);\n    };\n\n    this.onDeactivateAll = () => {\n      Meteor.call('algorithms.deactivateAll');\n      toastNoActiveAlgorithms();\n    };\n\n    this.onKeyDown = event => {\n      const blocked = this.state.blocked;\n\n      if ((event.key === 'Enter' || event.key === ' ') && !blocked.space) {\n        event.preventDefault();\n        this.onGoToNextStatus('down');\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            space: true\n          })\n        });\n      } else if (event.key === 'r') {\n        event.preventDefault();\n        this.onChangeAlgorithm();\n      } else if (event.key === 'Shift' && !blocked.shift) {\n        event.preventDefault();\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            shift: true\n          }),\n          isVisibleSolution: true\n        });\n      } else if (event.key === 'Control' && !blocked.control) {\n        event.preventDefault();\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            control: true\n          })\n        });\n      } else if ((event.key === 'Backspace' || event.key === 'Delete' || event.key === 'Escape') && !blocked.delete) {\n        event.preventDefault();\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            delete: true\n          })\n        });\n      }\n    };\n\n    this.onKeyPress = event => {\n      if (event.key === ' ') {\n        event.preventDefault();\n      }\n    };\n\n    this.onKeyUp = event => {\n      const {\n        blocked,\n        isVisibleSolution\n      } = this.state;\n\n      if (event.key === 'Enter' || event.key === ' ') {\n        this.onGoToNextStatus('up');\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            space: false\n          })\n        });\n      } else if (event.key === 'Shift') {\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            shift: false\n          }),\n          isVisibleSolution: false\n        });\n      } else if (event.key === 'Control') {\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            control: false\n          }),\n          isVisibleSolution: !isVisibleSolution\n        });\n      } else if (event.key === 'Backspace' || event.key === 'Delete' || event.key === 'Escape') {\n        this.onChangeAlgorithm();\n        this.setState({\n          blocked: _objectSpread({}, blocked, {\n            delete: false\n          })\n        });\n      }\n    };\n\n    this.onGoToNextStatus = upOrDown => {\n      const {\n        blocked,\n        currentAlgorithm,\n        currentCategory,\n        timerCurrentValue,\n        timerStatus\n      } = this.state;\n\n      if (timerStatus === 'resetted' && upOrDown === 'down' && !blocked.space) {\n        this.setState({\n          timerStatus: 'pre-inspection'\n        });\n      } else if (timerStatus === 'pre-inspection' && upOrDown === 'up') {\n        this.setState({\n          timerStatus: 'timer-on',\n          timerStartValue: moment().valueOf()\n        });\n        this.timer = setInterval(this.updateTimerTime, 1);\n      } else if (timerStatus === 'timer-on' && upOrDown === 'down' && !blocked.space) {\n        clearInterval(this.timer);\n        this.setState({\n          timerStatus: 'timer-off'\n        });\n      } else if (timerStatus === 'timer-off' && upOrDown === 'down' && !blocked.space) {\n        /* Save the time */\n        const result = _objectSpread({}, currentAlgorithm && {\n          algorithmId: currentAlgorithm._id,\n          scramble: currentAlgorithm.scramble\n        }, {\n          category: currentCategory.value,\n          time: timerCurrentValue\n        });\n\n        Meteor.call('results.insert', result, () => this.onChangeAlgorithm());\n      }\n    };\n\n    this.onReset = () => {\n      clearInterval(this.timer);\n      this.setState({\n        timerStatus: 'resetted',\n        timerCurrentValue: 0\n      });\n    };\n\n    this.updateTimerTime = () => {\n      this.setState(state => ({\n        timerCurrentValue: moment().valueOf() - state.timerStartValue\n      }));\n    };\n\n    this.state = {\n      blocked: {\n        control: false,\n        delete: false,\n        shift: false,\n        space: false\n      },\n      currentAlgorithm: {\n        category: '',\n        image: '',\n        scramble: '',\n        solution: '',\n        subtype: '',\n        type: ''\n      },\n      currentAlgorithmId: 0,\n      currentCategory: this.props.categories[0],\n      isVisibleSolution: false,\n      settingsOpened: true,\n      timerCurrentValue: 0,\n      timerStartValue: 0,\n      timerStatus: 'resetted'\n    };\n  }\n\n  componentDidMount() {\n    this.onChangeAlgorithm();\n    document.body.addEventListener('keydown', this.onKeyDown);\n    document.body.addEventListener('keypress', this.onKeyPress);\n    document.body.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    document.body.removeEventListener('keydown', this.onKeyDown);\n    document.body.removeEventListener('keypress', this.onKeyPress);\n    document.body.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  render() {\n    const {\n      state: {\n        currentAlgorithm,\n        currentCategory,\n        isVisibleSolution,\n        timerCurrentValue\n      },\n      props: {\n        algorithms,\n        categories\n      },\n      onActivateAll,\n      onToggleActive,\n      onChangeAlgorithm,\n      onChangeCategory,\n      onDeactivateAll\n    } = this;\n    const currentAlgorithms = algorithms.filter(algorithm => algorithm.category === currentCategory.value);\n    return React.createElement(React.Fragment, null, React.createElement(SemanticToastContainer, null), React.createElement(Grid, null, React.createElement(Grid.Column, {\n      width: 4\n    }, React.createElement(Menu, {\n      className: \"left-menu\",\n      inverted: true,\n      tabular: true,\n      vertical: true\n    }, categories.map(category => React.createElement(Menu.Item, {\n      key: category.value,\n      name: category.label,\n      active: currentCategory.value === category.value,\n      onClick: () => onChangeCategory(category)\n    })))), React.createElement(Grid.Column, {\n      width: 8,\n      textAlign: \"center\"\n    }, React.createElement(TrainingMain, {\n      currentAlgorithm: currentAlgorithm,\n      isVisibleSolution: isVisibleSolution,\n      onChangeAlgorithm: onChangeAlgorithm,\n      timerCurrentValue: timerCurrentValue\n    })), React.createElement(Grid.Column, {\n      width: 4\n    }, React.createElement(Averages, {\n      currentAlgorithm: currentAlgorithm,\n      currentCategory: currentCategory\n    }), React.createElement(TipsAndTricks, null))), this.state.settingsOpened && React.createElement(AlgSettings, {\n      algorithms: currentAlgorithms,\n      currentCategory: currentCategory,\n      onActivateAll: onActivateAll,\n      onToggleActive: onToggleActive,\n      onDeactivateAll: onDeactivateAll\n    }));\n  }\n\n}\n\nmodule.exportDefault(Training);","map":{"version":3,"sources":["client/imports/components/training/training.js"],"names":["_objectSpread","module","link","default","v","React","Component","moment","Grid","Menu","SemanticToastContainer","toast","AlgSettings","Averages","TipsAndTricks","TrainingMain","getRandomScramble","getRandomEntry","array","excludeId","index","Math","floor","random","length","entry","_id","toastNoActiveAlgorithms","title","type","description","time","Training","constructor","props","onChangeAlgorithm","algorithms","currentAlgorithmId","currentCategory","state","onReset","newAlgorithm","randomizableAlgorithm","activeAlgorithms","filter","algorithm","active","category","value","randomizableScramble","scramble","setState","currentAlgorithm","onChangeCategory","onToggleActive","Meteor","call","onActivateAll","onDeactivateAll","onKeyDown","event","blocked","key","space","preventDefault","onGoToNextStatus","shift","isVisibleSolution","control","delete","onKeyPress","onKeyUp","upOrDown","timerCurrentValue","timerStatus","timerStartValue","valueOf","timer","setInterval","updateTimerTime","clearInterval","result","algorithmId","image","solution","subtype","categories","settingsOpened","componentDidMount","document","body","addEventListener","componentWillUnmount","removeEventListener","render","currentAlgorithms","map","label","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from 'moment';\nimport { Grid, Menu } from 'semantic-ui-react';\nimport { SemanticToastContainer, toast } from 'react-semantic-toasts';\n\nimport AlgSettings from '../algSettings';\nimport Averages from '../averages';\nimport TipsAndTricks from '../tipsAndTricks';\nimport TrainingMain from '../trainingMain';\n\nimport { getRandomScramble } from '/lib/global-helpers';\n\n// TODO to be moved\nconst getRandomEntry = (array, excludeId) => {\n  const index = Math.floor(Math.random() * array.length);\n  const entry = array[index];\n\n  if (array.length > 1 && excludeId && entry._id === excludeId) {\n    return getRandomEntry(array, excludeId);\n  }\n\n  return entry;\n};\n\n// TODO to be moved\nconst toastNoActiveAlgorithms = () =>\n  toast({\n    title: 'No active algorithms',\n    type: 'warning',\n    description:\n      'Randomizing algorithms pauzed until you select at least one algorithm',\n    time: 5000\n  });\n\nclass Training extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      blocked: {\n        control: false,\n        delete: false,\n        shift: false,\n        space: false\n      },\n      currentAlgorithm: {\n        category: '',\n        image: '',\n        scramble: '',\n        solution: '',\n        subtype: '',\n        type: ''\n      },\n      currentAlgorithmId: 0,\n      currentCategory: this.props.categories[0],\n      isVisibleSolution: false,\n      settingsOpened: true,\n      timerCurrentValue: 0,\n      timerStartValue: 0,\n      timerStatus: 'resetted'\n    };\n  }\n\n  componentDidMount() {\n    this.onChangeAlgorithm();\n\n    document.body.addEventListener('keydown', this.onKeyDown);\n    document.body.addEventListener('keypress', this.onKeyPress);\n    document.body.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    document.body.removeEventListener('keydown', this.onKeyDown);\n    document.body.removeEventListener('keypress', this.onKeyPress);\n    document.body.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  onChangeAlgorithm = () => {\n    const { algorithms } = this.props;\n    const { currentAlgorithmId, currentCategory } = this.state;\n\n    this.onReset();\n\n    let newAlgorithm;\n    if (currentCategory.randomizableAlgorithm) {\n      const activeAlgorithms = algorithms.filter(\n        algorithm =>\n          !!algorithm.active && algorithm.category === currentCategory.value\n      );\n\n      if (!activeAlgorithms.length) {\n        toastNoActiveAlgorithms();\n      }\n\n      newAlgorithm = getRandomEntry(activeAlgorithms, currentAlgorithmId);\n    } else if (currentCategory.randomizableScramble) {\n      const scramble = getRandomScramble(25);\n      newAlgorithm = { category: currentCategory.value, scramble };\n    }\n\n    this.setState({\n      currentAlgorithm: newAlgorithm,\n      currentAlgorithmId: newAlgorithm && newAlgorithm._id // alg may be undefined, e.g. for {OLL,PLL}-Attack\n    });\n  };\n\n  onChangeCategory = category => {\n    this.setState({ currentCategory: category }, () => {\n      this.onChangeAlgorithm();\n    });\n  };\n\n  onToggleActive = algorithm => {\n    Meteor.call('algorithms.toggleActive', algorithm._id, !algorithm.active);\n  };\n\n  onActivateAll = () => {\n    const { currentCategory } = this.state;\n    Meteor.call('algorithms.activateAll', currentCategory.value);\n  };\n\n  onDeactivateAll = () => {\n    Meteor.call('algorithms.deactivateAll');\n    toastNoActiveAlgorithms();\n  };\n\n  onKeyDown = event => {\n    const blocked = this.state.blocked;\n\n    if ((event.key === 'Enter' || event.key === ' ') && !blocked.space) {\n      event.preventDefault();\n      this.onGoToNextStatus('down');\n      this.setState({ blocked: { ...blocked, space: true } });\n    } else if (event.key === 'r') {\n      event.preventDefault();\n      this.onChangeAlgorithm();\n    } else if (event.key === 'Shift' && !blocked.shift) {\n      event.preventDefault();\n      this.setState({\n        blocked: { ...blocked, shift: true },\n        isVisibleSolution: true\n      });\n    } else if (event.key === 'Control' && !blocked.control) {\n      event.preventDefault();\n      this.setState({ blocked: { ...blocked, control: true } });\n    } else if (\n      (event.key === 'Backspace' ||\n        event.key === 'Delete' ||\n        event.key === 'Escape') &&\n      !blocked.delete\n    ) {\n      event.preventDefault();\n      this.setState({ blocked: { ...blocked, delete: true } });\n    }\n  };\n\n  onKeyPress = event => {\n    if (event.key === ' ') {\n      event.preventDefault();\n    }\n  };\n\n  onKeyUp = event => {\n    const { blocked, isVisibleSolution } = this.state;\n\n    if (event.key === 'Enter' || event.key === ' ') {\n      this.onGoToNextStatus('up');\n      this.setState({ blocked: { ...blocked, space: false } });\n    } else if (event.key === 'Shift') {\n      this.setState({\n        blocked: { ...blocked, shift: false },\n        isVisibleSolution: false\n      });\n    } else if (event.key === 'Control') {\n      this.setState({\n        blocked: { ...blocked, control: false },\n        isVisibleSolution: !isVisibleSolution\n      });\n    } else if (\n      event.key === 'Backspace' ||\n      event.key === 'Delete' ||\n      event.key === 'Escape'\n    ) {\n      this.onChangeAlgorithm();\n      this.setState({ blocked: { ...blocked, delete: false } });\n    }\n  };\n\n  onGoToNextStatus = upOrDown => {\n    const {\n      blocked,\n      currentAlgorithm,\n      currentCategory,\n      timerCurrentValue,\n      timerStatus\n    } = this.state;\n\n    if (timerStatus === 'resetted' && upOrDown === 'down' && !blocked.space) {\n      this.setState({ timerStatus: 'pre-inspection' });\n    } else if (timerStatus === 'pre-inspection' && upOrDown === 'up') {\n      this.setState({\n        timerStatus: 'timer-on',\n        timerStartValue: moment().valueOf()\n      });\n      this.timer = setInterval(this.updateTimerTime, 1);\n    } else if (\n      timerStatus === 'timer-on' &&\n      upOrDown === 'down' &&\n      !blocked.space\n    ) {\n      clearInterval(this.timer);\n      this.setState({ timerStatus: 'timer-off' });\n    } else if (\n      timerStatus === 'timer-off' &&\n      upOrDown === 'down' &&\n      !blocked.space\n    ) {\n      /* Save the time */\n      const result = {\n        ...(currentAlgorithm && {\n          algorithmId: currentAlgorithm._id,\n          scramble: currentAlgorithm.scramble\n        }),\n        category: currentCategory.value,\n        time: timerCurrentValue\n      };\n\n      Meteor.call('results.insert', result, () => this.onChangeAlgorithm());\n    }\n  };\n\n  onReset = () => {\n    clearInterval(this.timer);\n    this.setState({ timerStatus: 'resetted', timerCurrentValue: 0 });\n  };\n\n  updateTimerTime = () => {\n    this.setState(state => ({\n      timerCurrentValue: moment().valueOf() - state.timerStartValue\n    }));\n  };\n\n  render() {\n    const {\n      state: {\n        currentAlgorithm,\n        currentCategory,\n        isVisibleSolution,\n        timerCurrentValue\n      },\n      props: { algorithms, categories },\n      onActivateAll,\n      onToggleActive,\n      onChangeAlgorithm,\n      onChangeCategory,\n      onDeactivateAll\n    } = this;\n\n    const currentAlgorithms = algorithms.filter(\n      algorithm => algorithm.category === currentCategory.value\n    );\n\n    return (\n      <>\n        <SemanticToastContainer />\n        <Grid>\n          <Grid.Column width={4}>\n            <Menu className=\"left-menu\" inverted tabular vertical>\n              {categories.map(category => (\n                <Menu.Item\n                  key={category.value}\n                  name={category.label}\n                  active={currentCategory.value === category.value}\n                  onClick={() => onChangeCategory(category)}\n                />\n              ))}\n            </Menu>\n          </Grid.Column>\n          <Grid.Column width={8} textAlign=\"center\">\n            <TrainingMain\n              currentAlgorithm={currentAlgorithm}\n              isVisibleSolution={isVisibleSolution}\n              onChangeAlgorithm={onChangeAlgorithm}\n              timerCurrentValue={timerCurrentValue}\n            />\n          </Grid.Column>\n          <Grid.Column width={4}>\n            <Averages\n              currentAlgorithm={currentAlgorithm}\n              currentCategory={currentCategory}\n            />\n            <TipsAndTricks />\n          </Grid.Column>\n        </Grid>\n        {this.state.settingsOpened && (\n          <AlgSettings\n            algorithms={currentAlgorithms}\n            currentCategory={currentCategory}\n            onActivateAll={onActivateAll}\n            onToggleActive={onToggleActive}\n            onDeactivateAll={onDeactivateAll}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default Training;\n"]},"sourceType":"module","hash":"6e7a99623442a42c8c03bbca09da65f700df056f"}
